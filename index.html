<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>D-Team Elite Hub</title>
    <style>
        :root { --bg: #0f1111; --card: #232f3e; --accent: #febd69; --text: #ffffff; --r: #ff4d4d; --y: #f1c40f; --g: #00ff88; }
        body { font-family: -apple-system, sans-serif; background: var(--bg); color: var(--text); margin: 0; padding: 10px; }
        .header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; padding: 0 5px; }
        h1 { font-size: 16px; margin: 0; color: var(--accent); font-weight: 800; }
        input[type="date"] { background: #3a4553; color: #fff; border: 1px solid #555; border-radius: 4px; padding: 4px; font-size: 14px; }
        
        table { width: 100%; border-collapse: separate; border-spacing: 0 5px; table-layout: fixed; }
        th { font-size: 10px; color: #888; font-weight: normal; text-align: center; }
        td { background: var(--card); padding: 12px 2px; text-align: center; border: none; }
        td:first-child { border-radius: 6px 0 0 6px; }
        td:last-child { border-radius: 0 6px 6px 0; }
        
        .name { font-size: 13px; font-weight: bold; text-align: left; padding-left: 10px; color: var(--accent); text-decoration: underline; white-space: nowrap; overflow: hidden; }
        input[type="number"] { width: 85%; background: #131a22; color: #fff; border: 1px solid #3a4553; border-radius: 4px; padding: 8px 0; text-align: center; font-size: 16px; -webkit-appearance: none; }
        
        .sc { font-size: 20px; font-weight: 900; }
        .rank-high { color: var(--g); }
        .rank-mid { color: var(--y); }
        .rank-low { color: var(--r); }

        .btns { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin: 15px 0; }
        button { padding: 12px; border: none; border-radius: 6px; font-weight: bold; font-size: 14px; cursor: pointer; transition: 0.2s; }
        button:active { opacity: 0.7; }
        .btn-save { background: var(--accent); color: #000; }
        .btn-csv { background: #3a4553; color: #fff; }

        /* 履歴モーダル */
        #modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); z-index: 1000; justify-content: center; align-items: center; }
        .modal-cont { background: #1a1a1a; width: 90%; max-height: 80%; border-radius: 12px; padding: 20px; border: 1px solid var(--accent); box-sizing: border-box; overflow-y: auto; }
        .modal-close { display: block; text-align: right; color: var(--accent); font-weight: bold; margin-bottom: 15px; }
        .hist-table { width: 100%; font-size: 12px; border-collapse: collapse; }
        .hist-table th, .hist-table td { border-bottom: 1px solid #333; padding: 8px 4px; text-align: center; }
    </style>
</head>
<body>

<div id="modal" onclick="closeModal(event)">
    <div class="modal-cont" onclick="event.stopPropagation()">
        <span class="modal-close" onclick="closeModal(event)">✕ 閉じる</span>
        <h3 id="m-name" style="color:var(--accent); margin-top:0;"></h3>
        <div id="m-history"></div>
    </div>
</div>

<div class="header">
    <h1>D-TEAM ELITE HUB</h1>
    <input type="date" id="date-pick" onchange="loadDay()">
</div>

<table>
    <thead>
        <tr>
            <th style="width:25%">氏名(タップ履歴)</th>
            <th style="width:16%">未配</th>
            <th style="width:16%">誤配</th>
            <th style="width:19%">Mentor</th>
            <th style="width:24%">当日点</th>
        </tr>
    </thead>
    <tbody id="list"></tbody>
</table>

<div class="btns">
    <button class="btn-save" onclick="saveData()">データを保存</button>
    <button class="btn
